(window["canvasWebpackJsonp"]=window["canvasWebpackJsonp"]||[]).push([[3684],{fY8A:function(e,t,s){"use strict"
s.r(t)
s.d(t,"default",(function(){return x}))
var i=s("ouhR")
var a=s.n(i)
var n=s("3O+N")
var o=s.n(n)
var l=s("HGxv")
s("BGrI")
var r=o.a.default
var u=r.template,d=r.templates=r.templates||{}
var c="/work/canvas-deploy/generated/ui/shared/module-sequence-footer/jst/ModuleSequenceFooter"
d[c]=u((function(e,t,s,i,a){this.compilerInfo=[4,">= 1.0.0"]
s=this.merge(s,e.helpers)
a=a||{}
var n,o,l,r="",u=s.helperMissing,d=this.escapeExpression,c="function",h=this
function m(e,t){var i,a,n,o=""
o+='\n      <span class="module-sequence-footer-button--previous" data-tooltip="right" data-html-tooltip-title="'+d((i=(i=e&&e.previous,null==i||false===i?i:i.tooltip),typeof i===c?i.apply(e):i))+'">\n          <a\n            href="'+d((i=(i=e&&e.previous,null==i||false===i?i:i.url),typeof i===c?i.apply(e):i))+'"\n            role="button"\n            class="Button"\n            aria-describedby="msf'
if(a=s.instanceNumber)i=a.call(e,{hash:{},data:t})
else{a=e&&e.instanceNumber
i=typeof a===c?a.call(e,{hash:{},data:t}):a}o+=d(i)+'-previous-desc"\n            aria-label="'+d((a=s.t||e&&e.t,n={hash:{i18n_inferred_key:true},data:t},a?a.call(e,"previous_module_item_a9e57348","Previous Module Item",n):u.call(e,"t","previous_module_item_a9e57348","Previous Module Item",n)))
i=s["if"].call(e,(i=e&&e.previous,null==i||false===i?i:i.externalItem),{hash:{},inverse:h.noop,fn:h.program(2,p,t),data:t});(i||0===i)&&(o+=i)
o+='"\n          >\n            <i class="icon-mini-arrow-left"></i>'+d((a=s.t||e&&e.t,n={hash:{scope:"jquery.module_sequence_footer"},data:t},a?a.call(e,"previous","Previous",n):u.call(e,"t","previous","Previous",n)))+'\n            <span id="msf'
if(a=s.instanceNumber)i=a.call(e,{hash:{},data:t})
else{a=e&&e.instanceNumber
i=typeof a===c?a.call(e,{hash:{},data:t}):a}o+=d(i)+'-previous-desc" class="hidden" hidden>'+d((i=(i=e&&e.previous,null==i||false===i?i:i.tooltipText),typeof i===c?i.apply(e):i))+"</span>\n          </a>\n      </span>\n    "
return o}function p(e,t){var i,a,n=""
n+=" - "+d((i=s.t||e&&e.t,a={hash:{i18n_inferred_key:true},data:t},i?i.call(e,"opens_in_new_window_b4b99243","opens in new window",a):u.call(e,"t","opens_in_new_window_b4b99243","opens in new window",a)))
return n}function f(e,t){var i,a,n,o=""
o+='\n      <span class="module-sequence-footer-button--next" data-tooltip="left" data-html-tooltip-title="'+d((i=(i=e&&e.next,null==i||false===i?i:i.tooltip),typeof i===c?i.apply(e):i))+'">\n        <a\n          href="'+d((i=(i=e&&e.next,null==i||false===i?i:i.url),typeof i===c?i.apply(e):i))+'"\n          role="button"\n          class="Button"\n          aria-describedby="msf'
if(a=s.instanceNumber)i=a.call(e,{hash:{},data:t})
else{a=e&&e.instanceNumber
i=typeof a===c?a.call(e,{hash:{},data:t}):a}o+=d(i)+'-next-desc"\n          aria-label="'+d((a=s.t||e&&e.t,n={hash:{i18n_inferred_key:true},data:t},a?a.call(e,"next_module_item_19e835f3","Next Module Item",n):u.call(e,"t","next_module_item_19e835f3","Next Module Item",n)))
i=s["if"].call(e,(i=e&&e.next,null==i||false===i?i:i.externalItem),{hash:{},inverse:h.noop,fn:h.program(2,p,t),data:t});(i||0===i)&&(o+=i)
o+='"\n            '
i=s["if"].call(e,(i=e&&e.next,null==i||false===i?i:i.modules_tab_disabled),{hash:{},inverse:h.noop,fn:h.program(5,_,t),data:t});(i||0===i)&&(o+=i)
o+="\n          "+d((a=s.disabledIf||e&&e.disabledIf,n={hash:{},data:t},a?a.call(e,(i=e&&e.next,null==i||false===i?i:i.modules_tab_disabled),n):u.call(e,"disabledIf",(i=e&&e.next,null==i||false===i?i:i.modules_tab_disabled),n)))+"\n        >\n          "+d((a=s.t||e&&e.t,n={hash:{scope:"jquery.module_sequence_footer"},data:t},a?a.call(e,"next","Next",n):u.call(e,"t","next","Next",n)))+'<i class="icon-mini-arrow-right"></i>\n          <span id="msf'
if(a=s.instanceNumber)i=a.call(e,{hash:{},data:t})
else{a=e&&e.instanceNumber
i=typeof a===c?a.call(e,{hash:{},data:t}):a}o+=d(i)+'-next-desc" class="hidden" hidden>'+d((i=(i=e&&e.next,null==i||false===i?i:i.tooltipText),typeof i===c?i.apply(e):i))+"</span>\n        </a>\n      </span>\n    "
return o}function _(e,t){return' aria-disabled="true" '}r+="<div class='module-sequence-padding'></div>\n<div class='module-sequence-footer' role=\"navigation\" aria-label=\""+d((o=s.t||t&&t.t,l={hash:{i18n_inferred_key:true},data:a},o?o.call(t,"module_navigation_97043417","Module Navigation",l):u.call(t,"t","module_navigation_97043417","Module Navigation",l)))+'">\n  <div class="module-sequence-footer-content">\n    '
n=s["if"].call(t,(n=t&&t.previous,null==n||false===n?n:n.show),{hash:{},inverse:h.noop,fn:h.program(1,m,a),data:a});(n||0===n)&&(r+=n)
r+="\n\n    "
n=s["if"].call(t,(n=t&&t.next,null==n||false===n?n:n.show),{hash:{},inverse:h.noop,fn:h.program(4,f,a),data:a});(n||0===n)&&(r+=n)
r+="\n  </div>\n</div>\n"
return r}))
var h=d[c]
var m=s("Y/W1")
var p=s.n(m)
var f=s("gI0r")
s("dhbk")
const _=Object(l["useScope"])("sequence_footer")
let v=0
a.a.fn.moduleSequenceFooter=function(e={}){if(!e.assetType||!e.assetID)throw"Option must be set with assetType and assetID"
this.msfAnimation=e=>this.find(".module-sequence-padding, .module-sequence-footer").toggleClass("no-animation",!e)
if(!this.data("msfInstance")){this.msfInstance=new a.a.fn.moduleSequenceFooter.MSFClass(e)
this.data("msfInstance",this.msfInstance)
this.msfInstance.fetch().done(()=>{if(this.msfInstance.hide){this.hide()
return}this.html(h({instanceNumber:this.msfInstance.instanceNumber,previous:this.msfInstance.previous,next:this.msfInstance.next}))
e&&void 0!==e.animation&&this.msfAnimation(e.animation)
this.show()
a()(window).triggerHandler("resize")
e.onFetchSuccess&&e.onFetchSuccess()})}return this}
class x{constructor(e={}){this.iconClasses={ModuleItem:"icon-module",File:"icon-paperclip",Page:"icon-document",Discussion:"icon-discussion",Assignment:"icon-assignment",Quiz:"icon-quiz",ExternalTool:"icon-link",ExternalUrl:"icon-link","Lti::MessageHandler":"icon-link"}
this.success=e=>{this.modules=e.modules
if(!(e&&e.items&&1===e.items.length)){this.hide=true
return}this.item=e.items[0];(this.previous.show=this.item.prev)&&this.buildPreviousData()
if(this.item.next||this.awaitingPathProgress()){this.next.show=true
const e=this.awaitingPathProgress()
e?this.buildNextPathData():this.buildNextData()}}
this.instanceNumber=v++
this.courseID=e.courseID||"undefined"!==typeof ENV&&ENV.course_id
this.assetID=e.assetID
this.assetType=e.assetType
this.location=e.location||document.location
this.previous={}
this.next={}
this.url=`/api/v1/courses/${this.courseID}/module_item_sequence`}getQueryParams(e){let t
e=e.split("+").join(" ")
const s={}
const i=/[?&]?([^=]+)=([^&]*)/g
while(t=i.exec(e))s[decodeURIComponent(t[1])]=decodeURIComponent(t[2])
return s}fetch(){const e=this.getQueryParams(this.location.search)
return e.module_item_id?a.a.ajaxJSON(this.url,"GET",{asset_type:"ModuleItem",asset_id:e.module_item_id,frame_external_urls:true},this.success,null,{}):a.a.ajaxJSON(this.url,"GET",{asset_type:this.assetType,asset_id:this.assetID,frame_external_urls:true},this.success,null,{})}buildPreviousData(){this.previous.url=this.item.prev.html_url
this.previous.externalItem="ExternalUrl"===this.item.prev.type&&this.item.prev.new_tab
if(this.item.current.module_id===this.item.prev.module_id){this.previous.tooltip=`<i class='${Object(f["a"])(this.iconClasses[this.item.prev.type])}'></i> ${Object(f["a"])(this.item.prev.title)}`
this.previous.tooltipText=_.t("prev_module_item_desc","Previous: *item*",{wrapper:this.item.prev.title})}else{const e=p.a.find(this.modules,e=>e.id===this.item.prev.module_id)
this.previous.tooltip=`<strong style='float:left'>${Object(f["a"])(_.t("prev_module","Previous Module:"))}</strong> <br> ${Object(f["a"])(e.name)}`
this.previous.tooltipText=_.t("prev_module_desc","Previous Module: *module*",{wrapper:e.name})}}buildNextPathData(){const e=this.item.mastery_path
if(e.awaiting_choice){this.next.url=e.choose_url
this.next.tooltipText=_.t("Choose the next mastery path")}else{const t=_.t("Next mastery path is currently locked")
const s=_.t("Next mastery path is still processing, please periodically refresh the page")
const i=e.locked?t:s
this.next.modules_tab_disabled=e.modules_tab_disabled
this.next.url=e.modules_url
this.next.tooltipText=i}this.next.tooltip=`<i class='${Object(f["a"])(this.iconClasses.ModuleItem)}'/> ${this.next.tooltipText}`}buildNextData(){this.next.url=this.item.next.html_url
this.next.externalItem="ExternalUrl"===this.item.next.type&&this.item.next.new_tab
if(this.item.current.module_id===this.item.next.module_id){this.next.tooltip=`<i class='${Object(f["a"])(this.iconClasses[this.item.next.type])}'></i> ${Object(f["a"])(this.item.next.title)}`
this.next.tooltipText=_.t("Next: *item*",{wrapper:this.item.next.title})}else{const e=p.a.find(this.modules,e=>e.id===this.item.next.module_id)
this.next.tooltip=`<strong style='float:left'>${Object(f["a"])(_.t("next_module","Next Module:"))}</strong> <br> ${Object(f["a"])(e.name)}`
this.next.tooltipText=_.t("next_module_desc","Next Module: *module*",{wrapper:e.name})}}awaitingPathProgress(){const e=this.item.mastery_path
if(e&&e.is_student)return e.awaiting_choice||e.locked||e.still_processing}}a.a.fn.moduleSequenceFooter.MSFClass=x}}])

//# sourceMappingURL=3684-c-cb2d2352b8.js.map